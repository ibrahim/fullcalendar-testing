(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{70:function(t,e,n){},82:function(t,e,n){"use strict";n.r(e);var a=n(3),i=n(1),o=n.n(i),r=n(11),c=n.n(r),s=(n(70),n(26)),l=n(6),d=n(111),u=n(121),m=n(124),p=n(119),j=n(120),f=n(122),b=n(123),v=n(115),O=n(117),h=n(7),x=n.n(h),g=n(10),y=n(125),T=n(127),S=n(116),A=n(55),w=n.n(A),C=n(54),M=n.n(C),k=n(56),D=n(39),Y=n(57),P=n(58),I=n(118),E=n(22),N=n(126),F=n(113),z=n(53),B=n.n(z),H=Object(d.a)((function(t){return{root:{marginBottom:t.spacing(2),width:"100%","& > * + *":{marginTop:t.spacing(2)}}}}));function V(t){var e=t.msg,n=o.a.useState(!0),i=Object(g.a)(n,2),r=i[0],c=i[1],s=H();return Object(a.jsx)("div",{className:s.root,children:Object(a.jsx)(F.a,{in:r,children:Object(a.jsx)(N.a,{severity:e.severity,action:Object(a.jsx)(S.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){c(!1)},children:Object(a.jsx)(B.a,{fontSize:"inherit"})}),children:e.message})})})}var G=n(15),R=function(t,e){var n=Object(i.createContext)();return[function(o){var r=function(t,e){var n=Object(i.useState)(e),a=Object(g.a)(n,2),o=a[0],r=a[1];return Object(i.useMemo)((function(){return t({state:o,setState:r})}),[o,r,t])}(t,e);return Object(a.jsx)(n.Provider,{value:r,children:o.children})},function(){return Object(i.useContext)(n)}]},L=n(40),W="Cannot schedule an appointment outside time slot.",J="An appointment already booked for current Participant",U=R((function(t){var e=t.state,n=t.setState;return{setSlots:function(t){n(Object(L.a)((function(e){e.slots=t})))},getUpcomingSlot:function(){return e.slots[0]},getSlots:function(){return e.slots},addAppointment:function(t){n(Object(L.a)((function(e){e.appointments=[].concat(Object(G.a)(e.appointments),[t])})))},addAppointmentValidation:function(t){var n=t.slot,a=t.dateStr;if(!n)return{severity:"warning",message:"Time slot is not defined"};var i=e.appointments&&e.appointments.find((function(t){return t.slotId===n.id}));if(i){var o=x()(i.startTime).format("DD MMM YYYY"),r=x()(i.startTime).format("HH:mm");return{severity:"info",message:"".concat(J," on ").concat(o," at ").concat(r)}}return x()(a).isBetween(x()(n.start),x()(n.end),void 0,"[]")?void 0:{severity:"warning",message:W}},removeAppointment:function(t){n(Object(L.a)((function(e){var n=e.appointments.filter((function(e){return e.id!==t.id}));e.appointments=n})))},getAppointments:function(){return e.appointments}}}),{slots:null,upcomingSlot:null,appointments:[],colors:{blue:"#025baa",yellow:"#FFA",orange:"#ff4e4e"}}),q=Object(g.a)(U,2),K=q[0],Q=q[1],X=n(44),Z=function(t){return function(e){return function(n){var i=t(n);return Object(a.jsx)(e,Object(X.a)(Object(X.a)({},i),n))}}},$=Object(d.a)((function(t){return{actions:{flexGrow:1,padding:20}}}));var _=Z((function(t){var e=Q(),n=e.colors,a=e.getAppointments,i=e.removeAppointment,o=e.addAppointment,r=e.addAppointmentValidation;return{colors:n,appointments:a(),addAppointment:o,addAppointmentValidation:r,removeAppointment:i}}))((function(t){var e=$(),n=t.close,o=t.slot,r=t.colors,c=t.appointments,l=t.addAppointment,d=t.addAppointmentValidation,u=t.removeAppointment,m=Array(o),p=i.useState(!1),j=Object(g.a)(p,2),f=j[0],b=j[1],v=i.useState(!1),h=Object(g.a)(v,2),y=h[0],T=h[1],S=i.useState(null),A=Object(g.a)(S,2),w=A[0],C=A[1],M=i.useState([]),N=Object(g.a)(M,2),F=N[0],z=N[1],B=i.useState("dayGridMonth"),H=Object(g.a)(B,2),G=H[0],R=H[1],L=i.useRef(null),W=i.useState(null),J=Object(g.a)(W,2),U=J[0],q=J[1];i.useEffect((function(){if(!Object(s.isEmpty)(c)){var t=function(t,e){var n=e.color,a=(e.view,e.slot);return t.filter((function(t){return t.slotId===a.id})).map((function(t){return{id:t.id,title:t.title,start:x()(t.startTime).format(),end:x()(t.endTime).format(),display:"block",groupId:"availableSlots",color:n,extendedProps:{eventType:"APPOINTMENT",slotId:t.slotId}}}))}(c,{color:r&&r.orange,view:G,slot:o});z(t)}}),[c,z,r,G,o]);var K=function(){T(!1),C(null),b(!1),Q()},Q=function(){return q(null)};return Object(a.jsxs)(a.Fragment,{children:[U?Object(a.jsx)(V,{msg:U}):Object(a.jsx)("div",{style:{height:"65px"}}),Object(a.jsx)(k.a,{ref:L,plugins:[D.b,Y.a,P.a],initialView:"dayGridMonth",initialDate:o.start,eventSources:[m,F],dateClick:function(t){var e=t.dateStr,n=t.view;try{if("dayGridMonth"===n.type){var a=L.current.getApi().view.calendar;a?a.zoomTo(new Date(e),"timeGridWeek"):console.log("Cannot get the calendar API")}else!function(t){var e=t.dateStr;if(Q(),f)return!1;var n=d({dateStr:e,slot:o});if(n&&n.message)q(n);else{var a=L.current.getApi().view.calendar;if(!Object(s.isEmpty)(a)){b(!0);var i=x()(e).format(),c=x()(e).add(o.extendedProps.slotTimeDuration,"minute").format();a.addEvent({id:Object(E.v4)(),title:o.title,start:i,end:c,backgroundColor:r&&r.blue,allDay:!1,constraint:"availableSlots",startEditable:function(){return y},durationEditable:!1,resizeableFromStart:!1,extendedProps:{eventType:"APPOINTMENT",slotId:o.id}}),T(!0),Q()}}}(t)}catch(i){console.error("catch error",i.message)}},eventClick:function(t){Q(),"APPOINTMENT"===t.event.extendedProps.eventType&&(C(t.event),t.el.style.borderColor="black")},eventAdd:function(t){var e=t.event;C(e)},eventDrop:function(t){var e,n=t.event.startStr;e=n,x()(e).isBefore(x()(),"day")?(q({severity:"alert",message:"Cannot schedule an appointment outside the time slot."}),t.revert()):(Q(),C(t.event))},viewDidMount:function(t){var e=t.view;R(e.type)}}),Object(a.jsxs)(O.a,{container:!0,justify:"flex-end",spacing:5,classes:{container:e.actions},children:[Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(I.a,{variant:"contained",disabled:f,color:"secondary",onClick:n,children:"Close"})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(I.a,{variant:"contained",disabled:!w,color:"secondary",onClick:function(){u(w),w.remove(),K()},children:"Remove"})}),Object(a.jsx)(O.a,{item:!0,children:Object(a.jsx)(I.a,{variant:"contained",disabled:!y,color:"primary",onClick:function(){if(w){var t={id:Object(E.v4)(),title:w.title,body:w.body,slotId:w.extendedProps.slotId,startTime:w.start,endTime:w.end};w.remove(),l(t),K(),q({severity:"success",message:"Appointment was scheduled at ".concat(x()(t.startTime).format("D MMM YYYY HH:mm"))})}},children:"Confirm Save"})})]})]})})),tt=Object(d.a)((function(t){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},scheduled:{fontSize:"32px"},hasAppointment:{fontSize:"32px",color:"#AEA"},paper:{backgroundColor:t.palette.background.paper,border:"2px solid #000",boxShadow:t.shadows[5],padding:t.spacing(2,4,3),width:"700px"}}}));function et(t){var e=t.slot,n=t.appointment,i=tt(),r=o.a.useState(!1),c=Object(g.a)(r,2),s=c[0],l=c[1],d=function(){l(!1)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(S.a,{edge:"end","aria-label":"Make an appointment",onClick:function(){l(!0)},children:n?Object(a.jsx)(M.a,{className:i.hasAppointment}):Object(a.jsx)(w.a,{className:i.scheduled})}),s&&e&&Object(a.jsx)(y.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:i.modal,open:s,onClose:d,BackdropComponent:T.a,BackdropProps:{timeout:500},children:Object(a.jsx)("div",{className:i.paper,children:Object(a.jsx)(_,{slot:e,close:d})})})]})}var nt=Object(l.a)((function(t){return{root:{font:"400 18px Roboto"},head:{backgroundColor:t.palette.primary.main,color:t.palette.common.white},body:{fontSize:17}}}))(p.a),at=Object(d.a)({table:{maxWidth:800},root:{margin:"100px auto",maxWidth:800}});var it=Z((function(t){var e=Q(),n=e.getSlots,a=e.getAppointments,i=e.setSlots;return{slots:n(),setSlots:i,appointments:a()}}))((function(t){var e=t.slots,n=t.setSlots,o=t.appointments,r=at();return i.useEffect((function(){Object(s.isNull)(e)&&new Promise((function(t){return t([{id:Object(E.v4)(),title:"Medical Checkup",body:"Routine annual medical checkup.",startTime:x()().add(2,"days").format(),endTime:x()().add(5,"days").format(),slotTimeDuration:90},{id:Object(E.v4)(),title:"Vaccine Trials",body:"Covid-19 clinical trials",startTime:x()().add(12,"days").format(),endTime:x()().add(17,"days").format(),slotTimeDuration:120},{id:Object(E.v4)(),title:"Follow-up Examination",body:"follow up",startTime:x()().add(35,"days").format(),endTime:x()().add(38,"days").format(),slotTimeDuration:120}])})).then((function(t){var e=function(t,e){var n=e.color;return t.filter((function(t){return x()(t.endTime).isAfter(x()(),"day")})).map((function(t){return{id:t.id,title:t.title,start:x()(t.startTime).startOf("day").format(),end:x()(t.endTime).add(1,"days").startOf("day").format(),allDay:!0,display:"background",groupId:"availableSlots",color:n,extendedProps:{eventType:"SLOT",slotTimeDuration:t.slotTimeDuration}}}))}(t,{color:"#8fdf82"});n(e)}))}),[e,n]),i.useEffect((function(){Object(s.isEmpty)(o)||console.log({appointments:o})}),[o]),Object(a.jsx)(O.a,{classes:{root:r.root},children:Object(a.jsx)(j.a,{component:v.a,children:Object(a.jsxs)(u.a,{className:r.table,"aria-label":"simple table",children:[Object(a.jsx)(f.a,{children:Object(a.jsxs)(b.a,{children:[Object(a.jsx)(nt,{children:"Title"}),Object(a.jsx)(nt,{align:"center",children:"Start Time"}),Object(a.jsx)(nt,{align:"center",children:"End Time"}),Object(a.jsx)(nt,{align:"center",children:"Appointment"}),Object(a.jsx)(nt,{align:"center",children:"Status"})]})}),Object(a.jsx)(m.a,{children:e&&e.map((function(t,e){var n=o.find((function(e){return e.slotId===t.id}));return Object(a.jsxs)(b.a,{children:[Object(a.jsx)(nt,{component:"th",scope:"row",classes:{},children:t.title}),Object(a.jsx)(nt,{align:"center",children:x()(t.start).format("DD MMM YYYY")}),Object(a.jsx)(nt,{align:"center",children:x()(t.end).format("DD MMM YYYY")}),Object(a.jsx)(nt,{align:"center",children:n?x()(n.startTime).format("DD MMM YYYY HH:mm"):"---"}),Object(a.jsx)(nt,{align:"center",children:Object(a.jsx)(et,{slot:t,appointment:n})})]},"slot-".concat(e))}))})]})})})}));var ot=function(){return Object(a.jsx)(K,{children:Object(a.jsx)(it,{})})};var rt=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(ot,{})})},ct=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,128)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,o=e.getLCP,r=e.getTTFB;n(t),a(t),i(t),o(t),r(t)}))};c.a.render(Object(a.jsx)(rt,{}),document.getElementById("root")),ct()}},[[82,1,2]]]);
//# sourceMappingURL=main.4ed161cd.chunk.js.map